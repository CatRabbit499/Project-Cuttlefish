<link rel="import" href="/components/polymer/polymer.html">
<dom-module id="pc-loader">
	<meta name="polymer-group" content="bootstrap"/>
	<style>
		:host {
			width: 100%;
		}
	</style>
	<template>
		<div class="" role="article">
			<content></content>
		</div>
	</template>
	<script>
		Polymer({
			is: 'pc-loader',
			properties: {},
			// Element Lifecycle
			ready: function(e) {
				var $this = $(this);
				var toLoad = $this.attr('target');
				if (toLoad.charAt(0)=='[')
					toLoad = JSON.parse(toLoad);
				ComponentLoader.getInstance()
					.require(toLoad)
					.then(() => ($this.trigger('load')));
				// `ready` is called after all elements have been configured, but propagates bottom-up.
				// This element's children are ready, but parents are not.
				//
				// This is the point where you should make modifications to the DOM (when
				// necessary), or kick off any processes the element wants to perform.
			},

			attached: function() {
				// `attached` fires once the element and its parents have been inserted
				// into a document.
				//
				// This is a good place to perform any work related to your element's
				// visual state or active behavior (measuring sizes, beginning animations,
				// loading resources, etc).
			},

			detached: function() {
				// The analog to `attached`, `detached` fires when the element has been
				// removed from a document.
				//
				// Use this to clean up anything you did in `attached`.
			},

			// Element Behavior
			transition: function(to, anim) {
				Transitions.transitionTo({animation:anim||1,from:$(this),to:$(to)});
			}
		});
	</script>
</dom-module>